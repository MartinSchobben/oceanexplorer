<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="oceanexplorer">
<title>Get started with the oceanexplorer • oceanexplorer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get started with the oceanexplorer">
<meta property="og:description" content="oceanexplorer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">oceanexplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/oceanexplorer.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UtrechtUniversity/oceanexplorer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="oceanexplorer_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get started with the oceanexplorer</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/UtrechtUniversity/oceanexplorer/blob/HEAD/vignettes/oceanexplorer.Rmd" class="external-link"><code>vignettes/oceanexplorer.Rmd</code></a></small>
      <div class="d-none name"><code>oceanexplorer.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>The <a href="https://www.nodc.noaa.gov/OC5/SELECT/woaselect/woaselect.html" class="external-link">World Ocean Atlas</a> (WOA) of the US agency <a href="https://www.ncei.noaa.gov/" class="external-link">NOAA</a> contains high-resolution and high-quality data for oceanographic variables, such as temperature, salinity and nutrients. This package facilitates easy access and exploration of this data, and targets three different audiences:</p>
<ul>
<li>Users with no programming experience by means of graphical user interface (Shiny app).</li>
<li>Users with minimal programming experience as a hybrid graphical-programming interface that can be easily integrated in an R workflow (RStudio addin).</li>
<li>Users with an R programming background.</li>
</ul>
<p>In this document I will explain the basic use cases of all three application types. But first a word on the back-end of this R package. This package heavily relies on geospatial data analysis facilitated by <em>sf</em> <span class="citation">(Pebesma 2022a)</span> for vectors and <em>stars</em> <span class="citation">(Pebesma 2022b)</span> for raster data (i.e., the native NOAA data format). I highly recommend reading the accompanying documentation of these packages if you intend to work with the NOAA datasets:</p>
<ul>
<li>stars (<a href="https://r-spatial.github.io/stars/" class="external-link uri">https://r-spatial.github.io/stars/</a>)</li>
<li>sf (<a href="https://r-spatial.github.io/sf/" class="external-link uri">https://r-spatial.github.io/sf/</a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="shiny-app">Shiny app<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h3>
<p>The shiny app is hosted by Utrecht University and can be found here: <a href="https://utrecht-university.shinyapps.io/oceanexplorer/" class="external-link uri">https://utrecht-university.shinyapps.io/oceanexplorer/</a>. The app allows exploration of the NOAA database and selected data can be extracted as a csv file.</p>
<div class="section level4">
<h4 id="load-noaa-data">Load NOAA data<a class="anchor" aria-label="anchor" href="#load-noaa-data"></a>
</h4>
<p>The initial screen starts at the “parameter” tab of the left-most field which allows the selection of the oceanographic variable of interest.</p>
<p><img src="get-started-screenshot1.png" width="90%"></p>
<ul>
<li>The drop down menu “variable” selects the oceanographic variable of interest.</li>
<li>The drop down menu “averaging” selects the time period over which the mean is calculated. The period can be “annual”, North Hemisphere seasonal (e.g., “Spring”, three-month periods) and monthly (e.g., “January”).</li>
<li>The drop down menu “resolution” selects the grid resolution for mean fields on a 1- or 5-degree longitude/latitude grid.</li>
</ul>
<p>The following document lists the technical details of the variable collection and presentation: <a href="https://www.ncei.noaa.gov/data/oceans/woa/WOA18/DOC/woa18documentation.pdf" class="external-link">NOAA World Ocean Atlas 2018 Product Documentation</a>. The papers on this page give in-depth information on the variable of interest: <a href="https://www.ncei.noaa.gov/products/world-ocean-atlas" class="external-link uri">https://www.ncei.noaa.gov/products/world-ocean-atlas</a>.</p>
<p>Clicking the “load data” button extracts the data from the NOAA WOA database. This operation can take some time.</p>
</div>
<div class="section level4">
<h4 id="filter-noaa-data">Filter NOAA data<a class="anchor" aria-label="anchor" href="#filter-noaa-data"></a>
</h4>
<p>The last action also automatically drops us in the “locations” tab (in the left most field), which allows us to select specific regions on the now displayed world map of the variable of interest.</p>
<p><img src="get-started-screenshot2.png" width="90%"></p>
<p><strong>Locations tab (Left)</strong></p>
<p>This field allows filtering of the dataset.</p>
<ul>
<li>The text fields: “depth”, “longitude”, and “latitude” specify the location to extract oceanographic variables. Alternatively, one can click on the plot (“map” tab) to obtain the values. It is possible to extract multiple locations at once by providing a comma separated list (e.g., 120, 130, 140) to the text field on the left (“locations” tab). Note, that depth and coordinate vectors should be of the same length, or one of the two should have length one. The data is extracted only when all three text fields have been filled, and by subsequently clicking the button “extract”.</li>
<li>Data extraction can be achieved in two modes; “point” and “fuzzy”, where the former results in a very precise search, the latter option searches in an area with a circumference of 50<span class="math inline">\(\,\)</span>km around the selected coordinate point. The returned value of a fuzzy search is therefore an average of the search area. Currently, fuzzy search is not yet implemented.</li>
<li>The button “extract” uses the information supplied in the text fields: “depth”, “longitude”, and “latitude” to extract the oceanographic variable. Hence, the button is only active when those fields have been filled, and otherwise remains greyed-out. The buttons: “reset” and “back” revert all, or the last extraction, respectively. These two operations can be used for both data extracted by clicking on the interactive plot and/or obtained by using the text field search.</li>
</ul>
<p><strong>Map tab (right)</strong></p>
<p>This field allows changing visual aspects of the NOAA data. In addition the plot is interactive and can be clicked (single click). It is therefore possible to only use the right-hand side of the screen to select your data without touching any of the buttons and menus on the left-side.</p>
<ul>
<li>The “projections” drop-down menu enables selection some of commonly used projections, such as “4326”. And, two stereographic projections “3031” and “3995” of the Antarctic and Arctic regions, respectively.</li>
<li>The checkbox “fix variable scale” determines whether the variable scale is fixed for the current depth slice or the whole dataset. Loosening the variable scale can help highlight nuanced differences in certain variables (e.g., phosphate).</li>
<li>The “depth” slider allows filter for depth slices.</li>
</ul>
</div>
<div class="section level4">
<h4 id="extract-noaa-data">Extract NOAA data<a class="anchor" aria-label="anchor" href="#extract-noaa-data"></a>
</h4>
<p>Now that you have filtered the data you required you can view the results in a table by clicking on the “table” tab on the right side of the screen.</p>
<p><img src="get-started-screenshot3.png" width="90%"></p>
<ul>
<li>The button “download” enables downloading of the current table in csv format.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="rstudio-addin">RStudio addin<a class="anchor" aria-label="anchor" href="#rstudio-addin"></a>
</h3>
<p>The RStudio addin has more-or-less the same functionality as the Shiny app except that it has fewer options. This tool is, however, great for integration in R scripts, as the addin emits the code used for your data selection and filtering operations. The emitted code is the “behind-the-scene” code used to generate the graphical output and is thus the backbone of the Shiny app and RStudio addin.</p>
<p><img src="get-started-screenshot4.png" width="90%"></p>
<p>Clicking on the “done” button terminates the application and emits the code at the point where the cursor currently resides.</p>
</div>
<div class="section level3">
<h3 id="using-the-oceanexplorer-r-code">Using the oceanexplorer R code<a class="anchor" aria-label="anchor" href="#using-the-oceanexplorer-r-code"></a>
</h3>
<p>The three main functionalities of the Shiny app and RStudio addin can also be performed programmatically.</p>
<div class="section level4">
<h4 id="loading-the-package-and-data">Loading the package and data<a class="anchor" aria-label="anchor" href="#loading-the-package-and-data"></a>
</h4>
<p>Imagine we are interested in phosphate concentrations in the month December from the Agulhas Basin at a depth 0f 1000 meter below sealevel.</p>
<p>First, we extract the data by proving the variable, grid resolution, and the averaging period.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://utrechtuniversity.github.io/oceanexplorer/">oceanexplorer</a></span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">WOA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_NOAA.html">get_NOAA</a></span><span class="op">(</span><span class="st">"phosphate"</span>, <span class="fl">1</span>, <span class="st">"December"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; stars object with 3 dimensions and 1 attribute</span></span>
<span><span class="co">#&gt; attribute(s), summary of first 1e+05 cells:</span></span>
<span><span class="co">#&gt;       Min.   1st Qu.    Median      Mean  3rd Qu.     Max.  NA's</span></span>
<span><span class="co">#&gt; p_an     0 0.1869067 0.4515139 0.7004678 1.197695 2.959586 34528</span></span>
<span><span class="co">#&gt; dimension(s):</span></span>
<span><span class="co">#&gt;       from  to offset delta refsys point                values x/y</span></span>
<span><span class="co">#&gt; lon      1 360   -180     1 WGS 84    NA                  NULL [x]</span></span>
<span><span class="co">#&gt; lat      1 180    -90     1 WGS 84    NA                  NULL [y]</span></span>
<span><span class="co">#&gt; depth    1  43     NA    NA     NA FALSE [0,2.5),...,[775,825)</span></span></code></pre></div>
<p>This operation can take a while, but it can be sped-up during future calls by caching the data. This can be done by setting the <code>cache</code> argument to <code>TRUE</code>. As a default <code>get_NOAA</code> does not cache the data.</p>
</div>
</div>
<div class="section level3">
<h3 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h3>
<p>Then we can plot the phosphate data from a depth of 1000 meter below sea level.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_NOAA.html">plot_NOAA</a></span><span class="op">(</span><span class="va">WOA</span>, depth <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanexplorer_files/figure-html/plot1-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="filter-agulhas-basin-data-point">Filter Agulhas Basin data point<a class="anchor" aria-label="anchor" href="#filter-agulhas-basin-data-point"></a>
</h3>
<p>Finally, we can filter a data point from, for example, the Agulhas Basin.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_NOAA.html">filter_NOAA</a></span><span class="op">(</span><span class="va">WOA</span>, depth <span class="op">=</span> <span class="fl">1000</span>, coord <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="fl">20</span>, lat <span class="op">=</span> <span class="op">-</span><span class="fl">46</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 1 feature and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 20 ymin: -46 xmax: 20 ymax: -46</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;       p_an depth       geometry</span></span>
<span><span class="co">#&gt; 1 2.146302  1000 POINT (20 -46)</span></span></code></pre></div>
<p>We can then also project these extraction points on the world map for future reference.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_NOAA.html">plot_NOAA</a></span><span class="op">(</span><span class="va">WOA</span>, depth <span class="op">=</span> <span class="fl">1000</span>, points <span class="op">=</span> <span class="va">pts</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanexplorer_files/figure-html/plot2-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references">
<div id="ref-sf">
<p>Pebesma, Edzer. 2022a. <em>Sf: Simple Features for R</em>. <a href="https://CRAN.R-project.org/package=sf" class="external-link">https://CRAN.R-project.org/package=sf</a>.</p>
</div>
<div id="ref-stars">
<p>———. 2022b. <em>Stars: Spatiotemporal Arrays, Raster and Vector Data Cubes</em>. <a href="https://CRAN.R-project.org/package=stars" class="external-link">https://CRAN.R-project.org/package=stars</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Schobben.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
